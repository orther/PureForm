<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>PureForm Functional Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="pureform.css" type="text/css" media="screen">
    </head>
    <body>

        <h1 id="heading">PureForm Functional Test</h1>

        <div id="details_form">
            <h2>Form</h2>

            <button id="submit_1">Submit</button>

            <ul>
                <li>
                    <label for="first_name">First Name</label>
                    <input id="first_name" value="Brandon">
                </li>
                <li>
                    <label for="last_name">Last Name</label>
                    <input id="last_name" value="Orther">
                </li>
            </ul>

            <ul>
                <li>
                    <label for="cool_level">Amount Of Coolness</label>
                    <select id="cool_level">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </li>
                <li>
                    <label for="cash_flow">Cash Flow</label>
                    <input id="cash_flow" value="1000000.99">
                </li>
                <li>
                    <label for="is_macking">Straight Macking Outta Control</label>
                    <input id="is_macking" type="checkbox" value="1">
                </li>
                <li>
                    <label for="description">Description</label>
                    <textarea id="description">Dude's doing it.</textarea>
                </li>
                <li>
                    <label for="sex">Sex</label><br>
                    <input type="radio" name="sex" value="Male" id="sex_male"><label for="sex_male">Male</label><br>
                    <input type="radio" name="sex" value="Female" id="sex_female"><label for="sex_female">Female</label>
                </li>

            </ul>

            <button id="submit_2">Submit</button>

        </div>

        <div id="pureform_details">
            <h2>PureForm Details</h2>

            <ul id="submission-details">

            </ul>

        </div>


        <script src="pureform.js" type="text/javascript"></script>
        <script src="retrievers/form_input.js" type="text/javascript"></script>
        <script src="types/boolean.js" type="text/javascript"></script>
        <script src="types/float.js" type="text/javascript"></script>
        <script src="types/integer.js" type="text/javascript"></script>
        <script src="types/integerCeil.js" type="text/javascript"></script>
        <script src="types/integerFloor.js" type="text/javascript"></script>
        <script src="types/string.js" type="text/javascript"></script>
        <script src="validators/max.js" type="text/javascript"></script>
        <script src="validators/min.js" type="text/javascript"></script>
        <script type="text/javascript">
            pureForm().addForm("details_form")
                .addField("first_name", {type: "string", name: "First Name", validators: {
                        "min": {"min": 3, "error": "%field_name% must be at least %min% characters long."},
                        "max": {"max": 30, "error": "%field_name% must be less than %max% characters long."}
                    }
                })
                .addField("last_name", {type: "string", name: "Last Name", validators: {
                        "min": {"min": 3, "error": "%field_name% must be at least %min% characters long."},
                        "max": {"max": 30, "error": "%field_name% must be less than %max% characters long."}
                    }
                });

            // console.log(pureForm().getForm("details_form").getFields());
            console.log(pureForm().getForm("details_form").getField("first_name")().validate());
        </script>


        <!--
        <script type="text/javascript">
        var edit_user_form = pureForm().create("edit_user").registerValidator("coolName", function (value, raw_value, type) {
            return (field.getValue() == "Brandon");
        }).addFields({
            /*
            "first_name": {type: "string", validators: ["coolName", ["limit", ], ]},
            "last_name":  {type: "string"},
            "is_macking": {type: "boolean"},
            "cool_level": {type: "integer"},
            */
            "cash_flow":  {type: "float"}
        }).addAggregates({
            "full_name": { aggregateFunction: function (formValues) {
                return {
                    "full_name_string": formValues("first_name") + " " + formValues("last_name"),
                    "first_name":       formValues("first_name"),
                    "last_name":        formValues("last_name")
                }
            }}
        }).onSubmit(function () {
            // triggered immediatly when form submitted
            var details = document.getElementById("submission-details");

            details.innerHTML = "<li>onSubmit Called</li>";

        }).onValid(function (fields) {
            // triggered after validation if all fields are valid
            var details = document.getElementById("submission-details");

            var field_details = "<ul>";
            for (field_name in fields) {

                // console.log(fields[field_name]());
                field_details += "<li>" + field_name + ": isValid(" + fields[field_name]().isValid() + ")</li>";

            }
            field_details += "</ul>";

            details.innerHTML += "<li>onValid Called: " + field_details + "</li>";

        }).onInvalid(function () {
            // triggered after validation if invalid field(s)
            var details = document.getElementById("submission-details");

            details.innerHTML += "<li>onInvalid Called</li>";

        }).onSubmitComplete(function () {
            // triggered after onValid or onInvalid.
            var details = document.getElementById("submission-details");

            details.innerHTML += "<li>onSubmitComplete Called</li>";

        }).attachSubmitButtons(["submit_1","submit_2"]);

        function ct () {

            return (function () {

                var __test = null;

                function get (value) {

                    return __test;

                }

                function set (value) {

                    __test = value;

                }

                return {"get": get, "set": set}

            })();

        }
        </script>
        -->

    </body>
</html>
