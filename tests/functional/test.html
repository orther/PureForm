<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>PureForm Functional Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="http://github.com/jquery/qunit/raw/master/qunit/qunit.css" type="text/css" media="screen">
        <script type="text/javascript" src="http://github.com/jquery/qunit/raw/master/qunit/qunit.js"></script>
        <!-- <link rel="stylesheet" href="/css/think-done.css" type="text/css"> -->
        <script src="../../pureform.js" type="text/javascript"></script>
        <script src="../../types/type.js" type="text/javascript"></script>
        <script src="../../types/boolean.js" type="text/javascript"></script>
        <script src="../../types/string.js" type="text/javascript"></script>
        <!-- Your tests file goes here -->
        <script type="text/javascript" src="../unit/pureform_test.js"></script>
    </head>
    <body>

        <h1 id="heading">PureForm Functional Test</h1>

        <h2>Form</h2>

        <button id="submit_1">Submit</button>

        <ul>
            <li>
                <label for="first_name">First Name</label>
                <input id="first_name" value="Brandon">
            </li>
            <li>
                <label for="last_name">Last Name</label>
                <input id="last_name" value="Orther">
            </li>
        </ul>

        <ul>
            <li>
                <label for="cool_level">Amount Of Coolness</label>
                <select id="cool_level">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </li>
            <li>
                <label for="cash_flow">Cash Flow</label>
                <input id="cash_flow" value="1000000.00">
            </li>
            <li>
                <label for="is_macking">Straight Macking Outta Control</label>
                <input id="is_macking" type="checkbox" value="1">
            </li>
            <li>
                <label for="description">Description</label>
                <textarea id="description">Dude's doing it.</textarea>
            </li>
            <li>
                <label for="sex">Sex</label><br>
                <input type="radio" name="sex" value="Male" id="sex_male"><label for="sex_male">Male</label><br>
                <input type="radio" name="sex" value="Female" id="sex_female"><label for="sex_female">Female</label>
            </li>

        </ul>

        <button id="submit_2">Submit</button>

        <h2>Submission Details</h2>

        <ul id="submission-details">

        </ul>

        <!-- Unit Testing -->
        <h1 id="qunit-header">QUnit Test Suite</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>

        <!-- Functional Testing JS -->
        <script type="text/javascript">
        var edit_user_form = pureForm().create("edit_user").addFields({
            "first_name": {type: "string"},
            "last_name":  {type: "string"},
            "is_macking": {type: "boolean"}
/*
            "cool_level": {type: "integer", min: 1, max: 5},
            "cash_flow":  {type: "float", min: 0, max: 9999999.99, precision: 2},
            "is_macking": {type: "boolean", typeFunction: function (rawValue) {
                return (raw_value === "1");
            }}
*/
        }).addAggregates({
            "full_name": { aggregateFunction: function (formValues) {
                return {
                    "full_name_string": formValues("first_name") + " " + formValues("last_name"),
                    "first_name":       formValues("first_name"),
                    "last_name":        formValues("last_name")
                }
            }}
        }).onSubmit(function () {
            // triggered immediatly when form submitted
            var details = document.getElementById("submission-details");

            details.innerHTML = "<li>onSubmit Called</li>";

        }).onValid(function () {
            // triggered after validation if all fields are valid
            var details = document.getElementById("submission-details");

            details.innerHTML += "<li>onValid Called</li>";

        }).onInvalid(function () {
            // triggered after validation if invalid field(s)
            var details = document.getElementById("submission-details");

            details.innerHTML += "<li>onInvalid Called</li>";

        }).onSubmitComplete(function () {
            // triggered after onValid or onInvalid.
            var details = document.getElementById("submission-details");

            details.innerHTML += "<li>onSubmitComplete Called</li>";

        }).attachSubmitButtons(["submit_1","submit_2"]);
        </script>

    </body>
</html>
